<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment"></script>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" id="mobile-menu-btn">☰</button>
    <div class="mobile-menu-overlay" id="mobile-menu-overlay" onclick="toggleMobileMenu()"></div>

    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo" onclick="toggleSidebar()" style="cursor: pointer;">
            <img src="https://img.icons8.com/ios/100/money-with-wings.png" alt="Finance Pro Logo" style="width: 32px; height: 32px; border-radius: 8px; filter: brightness(0) invert(1);" />
            <h1 class="sidebar-title">Finance Pro</h1>
        </div>
        <nav>
            <ul class="sidebar-nav">
                <li><a href="#" onclick="showSection('dashboard')" id="nav-dashboard" class="active">
                    <span class="nav-icon"><img src="https://img.icons8.com/external-flatart-icons-outline-flatarticons/64/external-finance-marketing-growth-flatart-icons-outline-flatarticons.png" alt="Dashboard" style="width: 24px; height: 24px; filter: brightness(0) invert(1);" /></span>
                    <span class="nav-text">Dashboard</span>
                </a></li>
                <li><a href="#" onclick="showSection('sueldo')" id="nav-sueldo">
                    <span class="nav-icon"><img src="https://img.icons8.com/external-kosonicon-outline-kosonicon/64/external-finance-insurance-kosonicon-outline-kosonicon.png" alt="Ingresos" style="width: 24px; height: 24px; filter: brightness(0) invert(1);" /></span>
                    <span class="nav-text">Ingresos</span>
                </a></li>
                <li><a href="#" onclick="showSection('deudas')" id="nav-deudas">
                    <span class="nav-icon"><img src="https://img.icons8.com/ios/100/bank-card-back-side--v1.png" alt="Deudas" style="width: 24px; height: 24px; filter: brightness(0) invert(1);" /></span>
                    <span class="nav-text">Deudas</span>
                </a></li>
                <li><a href="#" onclick="showSection('cuotas')" id="nav-cuotas">
                    <span class="nav-icon"><img src="https://img.icons8.com/ios/100/reminders.png" alt="Cuotas" style="width: 24px; height: 24px; filter: brightness(0) invert(1);" /></span>
                    <span class="nav-text">Cuotas</span>
                </a></li>
                <li><a href="#" onclick="showSection('herramientas')" id="nav-herramientas">
                    <span class="nav-icon"><img src="https://img.icons8.com/ios/100/open-end-wrench.png" alt="Herramientas" style="width: 24px; height: 24px; filter: brightness(0) invert(1);" /></span>
                    <span class="nav-text">Herramientas</span>
                </a></li>
                <li><a href="#" onclick="showSection('configuracion')" id="nav-configuracion">
                    <span class="nav-icon"><img src="https://img.icons8.com/ios/100/settings.png" alt="Configuración" style="width: 24px; height: 24px; filter: brightness(0) invert(1);" /></span>
                    <span class="nav-text">Configuración</span>
                </a></li>
            </ul>
        </nav>
        <div class="sidebar-footer">
            <div style="width: 100%;">
                <div style="color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; font-weight: 600; margin-bottom: 0.75rem; padding: 0 1rem;">Datos</div>
                <div style="display: flex; gap: 0.5rem; flex-direction: column;">
                    <button onclick="exportJSON()" class="btn-secondary" title="Exportar JSON" style="width: 100%;">Exportar JSON</button>
                    <button onclick="exportExcel()" class="btn-secondary" title="Exportar Excel" style="width: 100%;">Exportar Excel</button>
                    <button onclick="importJSON()" class="btn-secondary" title="Importar JSON" style="width: 100%;">Importar JSON</button>
                    <button onclick="importExcel()" class="btn-secondary" title="Importar Excel" style="width: 100%;">Importar Excel</button>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-area">
        <header class="top-bar">
            <div class="top-info">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="color: var(--text-secondary); font-size: 0.85rem;">Tipo de Cambio (1 USD = ARS):</span>
                    <span id="tipo-cambio-display" style="color: var(--text-primary); font-weight: 600; font-size: 0.9rem;">1450</span>
                </div>
            </div>
            <div class="top-actions">
                <!-- Botones movidos a la sección "Datos" del sidebar -->
            </div>
        </header>

        <div class="container">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="header-section">
                    <h2>Dashboard</h2>
                    <p>Resumen general de tu estado financiero.</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Deudas Mensual</div>
                        <div class="stat-value large" id="summary-total-deudas">$0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Ingresos</div>
                        <div class="stat-value large" id="summary-ingresos">$0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Saldo Actual</div>
                        <div class="stat-value large" id="summary-saldo-actual">$0</div>
                    </div>
                </div>

                <div class="stats-grid" style="margin-top: 1.5rem;">
                    <div class="stat-card">
                        <div class="stat-label">Deudas Anual</div>
                        <div class="stat-value large" id="summary-deudas-anual">$0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Ingreso de Sueldo Anual</div>
                        <div class="stat-value large" id="summary-ingreso-anual">$0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Saldo Total Después de Resto Anual</div>
                        <div class="stat-value large" id="summary-saldo-anual">$0</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                    <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                        <!-- Deudas Mensuales -->
                        <div class="main-card">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color);">
                                <div style="width: 4px; height: 24px; background-color: var(--accent-orange); border-radius: 2px;"></div>
                                <h3 style="margin: 0; font-size: 1.1rem; font-weight: 600;">Deudas Mensuales</h3>
                            </div>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Moneda</th>
                                        <th>Monto Mensual</th>
                                    </tr>
                                </thead>
                                <tbody id="dashboard-deudas-mensuales-list"></tbody>
                            </table>
                        </div>
                        <!-- Deudas Anuales (Cuotas) -->
                        <div class="main-card">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color);">
                                <div style="width: 4px; height: 24px; background-color: var(--accent-red); border-radius: 2px;"></div>
                                <h3 style="margin: 0; font-size: 1.1rem; font-weight: 600;">Deudas Anuales</h3>
                            </div>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Moneda</th>
                                        <th>Total</th>
                                        <th>Restante (ARS)</th>
                                    </tr>
                                </thead>
                                <tbody id="dashboard-deudas-anuales-list"></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="main-card">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color);">
                            <div style="width: 4px; height: 24px; background-color: var(--accent-green); border-radius: 2px;"></div>
                            <h3 style="margin: 0; font-size: 1.1rem; font-weight: 600;">Ingresos Detallados</h3>
                        </div>
                        <div id="dashboard-ingresos-list"></div>
                    </div>
                </div>
            </section>

            <!-- Sueldo Section -->
            <section id="sueldo" class="content-section">
                <div class="header-section" style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div>
                        <h2>Gestión de Ingresos</h2>
                        <p>Gestiona tus ingresos y deducciones mensuales.</p>
                    </div>
                    <button onclick="limpiarSueldo()" class="btn-clear" title="Limpiar datos de Ingresos">
                        <img src="https://img.icons8.com/ios/100/full-trash--v1.png" alt="Limpiar" style="width: 16px; height: 16px; filter: brightness(0) invert(1); margin-right: 0.5rem;" />
                        Limpiar
                    </button>
                </div>
                <div class="main-card">
                    <div class="form-group" style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                        <input type="checkbox" id="checkbox-sueldo-neto" onchange="toggleSueldoNeto(this.checked)" style="width: 20px; height: 20px; cursor: pointer;">
                        <label for="checkbox-sueldo-neto" style="margin: 0; cursor: pointer; font-weight: 600;">Sueldo Neto (Ingresar directamente)</label>
                    </div>
                    
                    <div id="sueldo-bruto-container" class="form-group">
                        <label>Sueldo Bruto (Base para %)</label>
                        <input type="number" id="input-sueldo-bruto" oninput="calculateSueldo()" placeholder="0.00">
                    </div>
                    
                    <div id="sueldo-neto-container" class="form-group" style="display: none;">
                        <label>Sueldo Neto</label>
                        <input type="number" id="input-sueldo-neto-directo" oninput="updateSueldoNetoDirecto(this.value)" placeholder="0.00">
                    </div>
                    
                    <div id="secciones-calculo-sueldo">
                        <div id="conceptos-suman-basico-card" style="margin-top: 2rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                                <div style="width: 4px; height: 24px; background-color: var(--accent-green); border-radius: 2px;"></div>
                                <h3 style="margin: 0; font-size: 1.1rem; font-weight: 600; color: var(--accent-green);">Conceptos que se suman al básico</h3>
                            </div>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Bono de conectividad, feriados, horas extras, etc.</p>
                            <div id="conceptos-suman-list">
                                <!-- Items que suman al básico -->
                            </div>
                            <button onclick="addConceptoSuman()" class="btn-add" style="color: var(--accent-green); border-color: var(--accent-green); border: 1px solid; margin-top: 1rem;">+ Añadir Concepto</button>
                        </div>

                        <div id="sueldo-deducciones-list" style="margin-top: 2rem;">
                            <!-- Items que restan (Porcentajes) -->
                        </div>
                        <button onclick="addSueldoItem('deduccion')" class="btn-add" style="color: var(--accent-red); border-color: var(--accent-red); border: 1px solid;">+ Añadir Deducción %</button>

                        <div id="sueldo-fijas-list" style="margin-top: 2rem;">
                            <!-- Deducciones fijas -->
                        </div>
                        <button onclick="addSueldoItem('fija')" class="btn-add" style="color: #ff7675; border-color: #ff7675; border: 1px solid;">+ Añadir Deducción Fija ($)</button>
                    </div>

                    <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color); text-align: right;">
                        <span style="color: var(--text-secondary);">Neto a cobrar:</span>
                        <div class="stat-value large" id="sueldo-neto-result">$0</div>
                    </div>
                </div>
                
                <div class="main-card" id="ingresos-adicionales-card" style="margin-top: 2rem;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                        <div style="width: 4px; height: 24px; background-color: var(--accent-green); border-radius: 2px;"></div>
                        <h3 style="margin: 0; font-size: 1.1rem; font-weight: 600; color: var(--accent-green);">Ingresos Adicionales</h3>
                    </div>
                    <div id="sueldo-ingresos-list">
                        <!-- Items que suman -->
                    </div>
                    <button onclick="addSueldoItem('ingreso')" class="btn-add" style="color: var(--accent-green); border-color: var(--accent-green); border: 1px solid; margin-top: 1rem;">+ Añadir Ingreso</button>
                </div>
            </section>

            <!-- Deudas Section -->
            <section id="deudas" class="content-section">
                <div class="header-section" style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div>
                        <h2>Gestión de Deudas</h2>
                        <p>Controla tus deudas activas y fechas de finalización.</p>
                    </div>
                    <button onclick="limpiarDeudas()" class="btn-clear" title="Limpiar datos de Deudas">
                        <img src="https://img.icons8.com/ios/100/full-trash--v1.png" alt="Limpiar" style="width: 16px; height: 16px; filter: brightness(0) invert(1); margin-right: 0.5rem;" />
                        Limpiar
                    </button>
                </div>
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: var(--card-bg); border-radius: 0.75rem; border: 1px solid var(--border-color);">
                    <label style="color: var(--text-secondary); font-size: 0.9rem;">Tipo de Cambio (1 USD = ARS):</label>
                    <input type="number" id="input-tipo-cambio" style="width: 120px;" oninput="updateExchangeRate(this.value)" placeholder="1450">
                </div>

                <!-- Card de Gastos en Cuotas -->
                <div class="main-card" style="padding: 0; margin-bottom: 2rem;">
                    <div style="padding: 1.5rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-color);">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <div style="width: 4px; height: 24px; background-color: var(--accent-red); border-radius: 2px;"></div>
                            <h3 style="margin: 0; font-size: 1.1rem; font-weight: 600;">Gastos en Cuotas</h3>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Moneda</th>
                                <th>Monto por Mes</th>
                                <th>Total de Cuotas</th>
                                <th>Inicio a Pagar</th>
                                <th>Finalización</th>
                                <th>Restante (ARS)</th>
                                <th>Total</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="deudas-cuotas-body"></tbody>
                    </table>
                    <div style="padding: 1.5rem;">
                        <button onclick="addDeudaCuota()" class="btn-add">+ Nuevo Gasto en Cuotas</button>
                    </div>
                </div>

                <!-- Card de Gastos Mensuales -->
                <div class="main-card" style="padding: 0;">
                    <div style="padding: 1.5rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-color);">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <div style="width: 4px; height: 24px; background-color: var(--accent-orange); border-radius: 2px;"></div>
                            <h3 style="margin: 0; font-size: 1.1rem; font-weight: 600;">Gastos Mensuales</h3>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Moneda</th>
                                <th>Monto a Pagar por Mes</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="gastos-mensuales-body"></tbody>
                    </table>
                    <div style="padding: 1.5rem;">
                        <button onclick="addGastoMensual()" class="btn-add">+ Nuevo Gasto Mensual</button>
                    </div>
                </div>
            </section>

            <!-- Cuotas Section -->
            <section id="cuotas" class="content-section">
                <div class="header-section" style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div>
                        <h2>Simulación de Cuotas</h2>
                        <p>Visualización temporal de tus pagos en cuotas.</p>
                    </div>
                    <button onclick="limpiarCuotas()" class="btn-clear" title="Limpiar datos de Cuotas">
                        <img src="https://img.icons8.com/ios/100/full-trash--v1.png" alt="Limpiar" style="width: 16px; height: 16px; filter: brightness(0) invert(1); margin-right: 0.5rem;" />
                        Limpiar
                    </button>
                </div>
                
                <div class="chart-container">
                    <canvas id="timelineChart"></canvas>
                </div>

                <div class="main-card" style="padding: 0; margin-top: 2rem;">
                    <table>
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Moneda</th>
                                <th>Valor Cuota</th>
                                <th>Total Cuotas</th>
                                <th>Inicio</th>
                                <th>Fin</th>
                                <th>Total Restante (ARS)</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="cuotas-body"></tbody>
                    </table>
                    <div style="padding: 1.5rem;">
                        <button onclick="addCuotaRow()" class="btn-add">+ Nueva Cuota</button>
                    </div>
                </div>
            </section>

            <!-- Herramientas Section -->
            <section id="herramientas" class="content-section">
                <div class="header-section" style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div>
                        <h2>Herramientas</h2>
                        <p>Calculadoras y utilidades financieras.</p>
                    </div>
                    <button onclick="limpiarHerramientas()" class="btn-clear" title="Limpiar calculadoras">
                        <img src="https://img.icons8.com/ios/100/full-trash--v1.png" alt="Limpiar" style="width: 16px; height: 16px; filter: brightness(0) invert(1); margin-right: 0.5rem;" />
                        Limpiar
                    </button>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                    <!-- Calculadora de Feriado -->
                    <div class="main-card">
                        <h3 style="margin-top: 0; margin-bottom: 1.5rem;">Calculadora de Feriado</h3>
                        <div class="form-group">
                            <label>Sueldo Bruto</label>
                            <input type="number" id="input-feriado-bruto" oninput="calculateFeriado()" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <input type="number" id="input-feriado-porcentaje" value="139" oninput="calculateFeriado()" placeholder="39">
                            <small style="color: var(--text-secondary); font-size: 0.85rem; margin-top: 0.25rem; display: block;">Nota: El porcentaje suele ser 139%</small>
                        </div>
                        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
                            <span style="color: var(--text-secondary);">Valor del Feriado:</span>
                            <div class="stat-value large" id="feriado-result">$0</div>
                        </div>
                    </div>

                    <!-- Aguinaldo -->
                    <div class="main-card">
                        <h3 style="margin-top: 0; margin-bottom: 1.5rem;">Aguinaldo</h3>
                        <div style="margin-bottom: 1rem;">
                            <span style="color: var(--text-secondary);">Sueldo Neto a Cobrar:</span>
                            <div class="stat-value" id="aguinaldo-sueldo-neto">$0</div>
                        </div>
                        <div style="padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
                            <span style="color: var(--text-secondary);">Aguinaldo (50% del Neto):</span>
                            <div class="stat-value large" id="aguinaldo-result">$0</div>
                        </div>
                    </div>

                    <!-- Dólar Oficial -->
                    <div class="main-card">
                        <h3 style="margin-top: 0; margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center;">
                            <span>Dólar Oficial</span>
                            <button onclick="actualizarDolarOficial()" class="btn-secondary" style="padding: 0.4rem 0.8rem; font-size: 0.85rem;" id="btn-actualizar-dolar">
                                Actualizar
                            </button>
                        </h3>
                        <div style="text-align: center; padding: 1.5rem 0;">
                            <div class="stat-value large" id="dolar-oficial-valor">$0</div>
                            <span style="color: var(--text-secondary); font-size: 0.9rem; display: block; margin-top: 0.5rem;">1 USD = ARS</span>
                            <div style="color: var(--text-secondary); font-size: 0.75rem; margin-top: 0.5rem;" id="dolar-oficial-fecha">
                                Última actualización: -
                            </div>
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                    <!-- Calculadora de Dólar -->
                    <div class="main-card">
                        <h3 style="margin-top: 0; margin-bottom: 1.5rem;">Calculadora de Dólar</h3>
                        <div class="form-group">
                            <label>Tipo de Cambio (1 USD = ARS)</label>
                            <input type="number" id="input-calc-dolar-tc" value="1450" oninput="calculateDolar()" placeholder="1450">
                        </div>
                        <div class="form-group">
                            <label>USD a ARS</label>
                            <input type="number" id="input-usd-ars" oninput="calculateDolar()" placeholder="0.00" step="0.01">
                            <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;" id="result-usd-ars">
                                Resultado: $0 ARS
                            </div>
                        </div>
                        <div class="form-group">
                            <label>ARS a USD</label>
                            <input type="number" id="input-ars-usd" oninput="calculateDolar()" placeholder="0.00" step="0.01">
                            <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;" id="result-ars-usd">
                                Resultado: $0 USD
                            </div>
                        </div>
                    </div>

                    <!-- Calculadora de Porcentaje -->
                    <div class="main-card">
                        <h3 style="margin-top: 0; margin-bottom: 1.5rem;">Calculadora de Porcentaje</h3>
                        <div class="form-group">
                            <label>Valor Base</label>
                            <input type="number" id="input-porcentaje-base" oninput="calculatePorcentaje()" placeholder="0.00" step="0.01">
                        </div>
                        <div class="form-group">
                            <label>Porcentaje (%)</label>
                            <input type="number" id="input-porcentaje-valor" oninput="calculatePorcentaje()" placeholder="0.00" step="0.01">
                        </div>
                        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
                            <span style="color: var(--text-secondary);">Resultado:</span>
                            <div class="stat-value large" id="porcentaje-result">$0</div>
                        </div>
                        <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                            <span style="color: var(--text-secondary); font-size: 0.85rem;">Valor con porcentaje aplicado:</span>
                            <div class="stat-value" id="porcentaje-total">$0</div>
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                    <!-- Calculadora de Impuestos Tarjeta Dólares -->
                    <div class="main-card">
                        <h3 style="margin-top: 0; margin-bottom: 1.5rem;">Impuestos Tarjeta de Crédito en Dólares</h3>
                        <div class="form-group">
                            <label>Monto en USD</label>
                            <input type="number" id="input-impuestos-usd" oninput="calculateImpuestosTarjeta()" placeholder="0.00" step="0.01">
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" id="checkbox-servicio-digital" onchange="calculateImpuestosTarjeta()" style="width: auto;">
                                <span>Es servicio digital (streaming, software, etc.)</span>
                            </label>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" id="checkbox-deducir-percepciones" onchange="calculateImpuestosTarjeta()" style="width: auto;">
                                <span>Puedo deducir percepciones (Ganancias y Bienes Personales)</span>
                            </label>
                        </div>
                        
                        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
                            <div style="margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 0.75rem; padding: 0.75rem; background-color: rgba(59, 130, 246, 0.05); border-radius: 0.5rem;">
                                    <span style="color: var(--text-secondary); font-size: 0.9rem;">Impuesto PAIS (30%):</span>
                                    <span style="font-weight: 600; font-size: 1rem;" id="impuesto-pais">$0 USD</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 0.75rem; padding: 0.75rem; background-color: rgba(59, 130, 246, 0.05); border-radius: 0.5rem;">
                                    <span style="color: var(--text-secondary); font-size: 0.9rem;">Percepción Ganancias (100%):</span>
                                    <span style="font-weight: 600; font-size: 1rem;" id="percepcion-ganancias">$0 USD</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 0.75rem; padding: 0.75rem; background-color: rgba(59, 130, 246, 0.05); border-radius: 0.5rem;">
                                    <span style="color: var(--text-secondary); font-size: 0.9rem;">Percepción Bienes Personales (25%):</span>
                                    <span style="font-weight: 600; font-size: 1rem;" id="percepcion-bienes">$0 USD</span>
                                </div>
                                <div style="display: none; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 0.75rem; padding: 0.75rem; background-color: rgba(59, 130, 246, 0.05); border-radius: 0.5rem;" id="iva-container">
                                    <span style="color: var(--text-secondary); font-size: 0.9rem;">IVA Servicios Digitales (21%):</span>
                                    <span style="font-weight: 600; font-size: 1rem;" id="iva-digital">$0 USD</span>
                                </div>
                            </div>
                            
                            <div style="padding-top: 1rem; border-top: 1px solid var(--border-color); margin-top: 1rem;">
                                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 1rem; padding: 1rem; background-color: rgba(239, 68, 68, 0.1); border-radius: 0.5rem;">
                                    <span style="color: var(--text-secondary); font-size: 1rem;">Total con impuestos:</span>
                                    <div class="stat-value" id="impuestos-total" style="margin: 0;">$0 USD</div>
                                </div>
                                <div style="display: none; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 1rem; padding: 1rem; background-color: rgba(16, 185, 129, 0.1); border-radius: 0.5rem;" id="ahorro-container">
                                    <span style="color: var(--accent-green); font-size: 1rem; font-weight: 600;">Ahorro por deducciones:</span>
                                    <span style="color: var(--accent-green); font-weight: 700; font-size: 1.1rem;" id="impuestos-ahorro">$0 USD</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%; padding: 1rem; background-color: rgba(59, 130, 246, 0.1); border-radius: 0.5rem;">
                                    <span style="color: var(--text-primary); font-size: 1.1rem; font-weight: 600;">Costo real a pagar:</span>
                                    <div class="stat-value large" id="impuestos-costo-real" style="margin: 0;">$0 USD</div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
                                <small style="color: var(--text-secondary); font-size: 0.75rem; display: block; line-height: 1.5;">
                                    <strong>Nota:</strong> Las percepciones de Ganancias y Bienes Personales pueden deducirse o solicitarse para devolución en la declaración jurada anual, según tu situación fiscal. El Impuesto PAIS no es deducible.
                                </small>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                    <!-- Días Laborales Restantes -->
                    <div class="main-card">
                        <h3 style="margin-top: 0; margin-bottom: 1.5rem;">Días Laborales Restantes</h3>
                        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
                            <div style="display: flex; justify-content: space-between; align-items: center; width: 100%; padding: 1rem; background-color: rgba(59, 130, 246, 0.1); border-radius: 0.5rem;">
                                <span style="color: var(--text-primary); font-size: 1.1rem; font-weight: 600;">Días hábiles hasta fin de año:</span>
                                <div class="stat-value large" id="dias-laborales-restantes" style="margin: 0;">0</div>
                            </div>
                        </div>
                    </div>

                    <!-- Feriados de Argentina -->
                    <div class="main-card">
                        <h3 style="margin-top: 0; margin-bottom: 1.5rem;">Feriados de Argentina</h3>
                        <div id="feriados-list" style="max-height: 400px; overflow-y: auto;">
                            <!-- Se llenará dinámicamente -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Configuración Section -->
            <section id="configuracion" class="content-section">
                <div class="header-section" style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div>
                        <h2>Configuración</h2>
                        <p>Personaliza la apariencia y comportamiento de la aplicación.</p>
                    </div>
                </div>

                <div class="main-card">
                    <h3 style="margin-top: 0; margin-bottom: 1.5rem; font-family: 'Orbitron', monospace; color: var(--accent-orange); text-transform: uppercase; letter-spacing: 0.1em;">Temas</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                        <!-- Tema Gamer -->
                        <div class="theme-card" data-theme="gamer" onclick="cambiarTema('gamer')">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%); border: 2px solid #ff8800; position: relative; height: 120px; margin-bottom: 1rem;">
                                <div style="position: absolute; top: 10px; left: 10px; width: 30px; height: 30px; background: #ff8800; box-shadow: 0 0 10px #ff8800;"></div>
                                <div style="position: absolute; bottom: 10px; left: 10px; right: 10px; height: 20px; background: rgba(255, 136, 0, 0.2); border-top: 2px solid #ff8800;"></div>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #ff8800; font-family: 'Orbitron', monospace; font-size: 0.7rem; text-shadow: 0 0 5px #ff8800;">GAMER</div>
                            </div>
                            <h4 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">Gamer / HUD</h4>
                            <p style="margin: 0; color: var(--text-secondary); font-size: 0.85rem;">Estilo futurista con acentos naranjas y efectos glow</p>
                        </div>

                        <!-- Tema Clásico -->
                        <div class="theme-card" data-theme="classic" onclick="cambiarTema('classic')">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #0f1117 0%, #1a1d28 100%); border: 2px solid #3b82f6; position: relative; height: 120px; margin-bottom: 1rem;">
                                <div style="position: absolute; top: 10px; left: 10px; width: 30px; height: 30px; background: #3b82f6; border-radius: 8px;"></div>
                                <div style="position: absolute; bottom: 10px; left: 10px; right: 10px; height: 20px; background: rgba(59, 130, 246, 0.1); border-radius: 4px;"></div>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #3b82f6; font-size: 0.7rem;">CLÁSICO</div>
                            </div>
                            <h4 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">Clásico</h4>
                            <p style="margin: 0; color: var(--text-secondary); font-size: 0.85rem;">Diseño limpio y profesional con acentos azules</p>
                        </div>

                        <!-- Tema Oscuro -->
                        <div class="theme-card" data-theme="dark" onclick="cambiarTema('dark')">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%); border: 2px solid #ffffff; position: relative; height: 120px; margin-bottom: 1rem;">
                                <div style="position: absolute; top: 10px; left: 10px; width: 30px; height: 30px; background: #ffffff; border-radius: 50%;"></div>
                                <div style="position: absolute; bottom: 10px; left: 10px; right: 10px; height: 20px; background: rgba(255, 255, 255, 0.1);"></div>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #ffffff; font-size: 0.7rem;">OSCURO</div>
                            </div>
                            <h4 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">Oscuro Minimalista</h4>
                            <p style="margin: 0; color: var(--text-secondary); font-size: 0.85rem;">Tema oscuro minimalista con acentos blancos</p>
                        </div>

                        <!-- Tema Cyberpunk -->
                        <div class="theme-card" data-theme="cyberpunk" onclick="cambiarTema('cyberpunk')">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #0a0a0a 0%, #1a0033 100%); border: 2px solid #ff00ff; position: relative; height: 120px; margin-bottom: 1rem;">
                                <div style="position: absolute; top: 10px; left: 10px; width: 30px; height: 30px; background: #ff00ff; box-shadow: 0 0 15px #ff00ff;"></div>
                                <div style="position: absolute; bottom: 10px; left: 10px; right: 10px; height: 20px; background: rgba(255, 0, 255, 0.2); border-top: 2px solid #00ffff;"></div>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #00ffff; font-family: 'Orbitron', monospace; font-size: 0.7rem; text-shadow: 0 0 10px #00ffff;">CYBERPUNK</div>
                            </div>
                            <h4 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">Cyberpunk</h4>
                            <p style="margin: 0; color: var(--text-secondary); font-size: 0.85rem;">Estilo cyberpunk con acentos magenta y cian</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <input type="file" id="import-file" style="display:none" onchange="handleFileImport(event)">
    <script src="script.js"></script>
</body>
</html>
